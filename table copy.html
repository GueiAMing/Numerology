<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3x3 Table with Transparent Lines and Text</title>
    <style>
        #gridTable {
            border-collapse: collapse;
            position: relative;
            z-index: 1;
        }
        td {
            width: 30px;
            height: 30px;
            text-align: center;
            border: 1px solid #000;
            position: relative;
            z-index: 2;
        }
        #gridCanvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
    </style>
</head>
<body>

<div style="position: relative;">
    <canvas id="gridCanvas" width="90" height="90"></canvas>
    <table id="gridTable">
        <tbody>
            <script>
                let count = 1;
                for (let i = 0; i < 3; i++) {
                    document.write("<tr>");
                    for (let j = 0; j < 3; j++) {
                        document.write("<td>" + count + "</td>");
                        count++;
                    }
                    document.write("</tr>");
                }
            </script>
        </tbody>
    </table>
</div>

<!-- 透明度控制滑塊 -->
<label for="textOpacity">Text Opacity: </label>
<input type="range" id="textOpacity" min="0" max="1" step="0.1" value="1" onchange="updateOpacity(this.value)">

<script>
    const canvas = document.getElementById('gridCanvas');
    const ctx = canvas.getContext('2d');
    const lines = [
        [{ x: 15, y: 15 }, { x: 75, y: 15 }],
        [{ x: 15, y: 45 }, { x: 75, y: 45 }],
        [{ x: 15, y: 75 }, { x: 75, y: 75 }],
        [{ x: 15, y: 15 }, { x: 15, y: 75 }],
        [{ x: 45, y: 15 }, { x: 45, y: 75 }],
        [{ x: 75, y: 15 }, { x: 75, y: 75 }],
        [{ x: 15, y: 15 }, { x: 75, y: 75 }],
        [{ x: 75, y: 15 }, { x: 15, y: 75 }]
    ];
    const lineLabels = ["Line 1", "Line 2", "Line 3", "Line 4", "Line 5", "Line 6", "Line 7", "Line 8"];

    function drawCircle() {
        ctx.beginPath();
        ctx.arc(15, 15, 12, 0, 2 * Math.PI);
        ctx.strokeStyle = 'blue';
        ctx.lineWidth = 2;
        ctx.stroke();

        // 繪製圓旁邊的文字
        ctx.fillText("Circle", 25, 20);
    }

    function drawLinesAndLabels(opacity) {
        ctx.strokeStyle = 'red';
        ctx.lineWidth = 2;
        ctx.font = "10px Arial";
        ctx.fillStyle = "black";

        // 使用 globalAlpha 設置文字透明度
        ctx.globalAlpha = opacity;

        lines.forEach((line, index) => {
            // 繪製線條
            ctx.beginPath();
            ctx.moveTo(line[0].x, line[0].y);
            ctx.lineTo(line[1].x, line[1].y);
            ctx.stroke();

            // 計算線條中點
            const midX = (line[0].x + line[1].x) / 2;
            const midY = (line[0].y + line[1].y) / 2;

            // 在中點旁繪製文字標籤
            ctx.fillText(lineLabels[index], midX + 5, midY);
        });

        ctx.globalAlpha = 1.0; // 還原透明度
    }

    function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function updateOpacity(opacity) {
        clearCanvas();
        drawCircle();
        drawLinesAndLabels(opacity);
    }

    // 初始化繪製
    updateOpacity(1);
</script>

</body>
</html>
