<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3x3 Table with Lines and Circle</title>
    <style>
        /* 設定表格樣式 */
        #gridTable {
            border-collapse: collapse;
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .td-number {
            width: 33%;
            height: 33%;
            text-align: center;
            font-size: 33vm;
            border: 3px solid #000;
            position: relative;
            z-index: 2;
        }

        /* 設定 canvas 位於表格下層 */
        #gridCanvas {
            z-index: -1;
            position: absolute; /* 设置 canvas 为绝对定位 */
            top: 0;            /* 固定在 div 的顶部 */
            left: 0;           /* 固定在 div 的左边 */
            width: 100%;       /* 宽度与 div 相同 */
            height: 100%;      /* 高度与 div 相同 */
        }

        .div-graph{
            width: 270px;
            height: 270px;
            position: relative;
        }
    </style>
</head>
<body>

<div style="position: relative;">
    <!-- Canvas for drawing lines and circle -->
    

    <!-- Table for displaying numbers -->
    <div id ="123" class="div-graph">
        <canvas id="gridCanvas"></canvas>
            <table id="gridTable">
                <tbody>
                    <script>
                        // 使用 JavaScript 生成表格內容
                        let count = 1;
                        for (let i = 0; i < 3; i++) {
                            document.write("<tr>");
                            for (let j = 0; j < 3; j++) {
                                document.write("<td class=td-number>" + count + "</td>");
                                count++;
                            }
                            document.write("</tr>");
                        }
                    </script>
                </tbody>
            </table>
    </div>
</div>

<script>
    // 獲取 canvas 元素

    const div = document.getElementById('123');
    const canvas = document.getElementById('gridCanvas');
    const ctx = canvas.getContext('2d');

    const firstPercent = 1/6; // 17% 水平位置
    const secondPercent = 3/6; // 50% 水平位置
    const thirdPercent = 5/6; // 83% 水平位置


    // const rect = canvas.getBoundingClientRect();
    canvas.width = div.clientWidth;
    canvas.height = div.clientHeight;
    basewidth = canvas.width;
    baseheight = canvas.height;
    // 定義8條連線的起點和終點
    const lines = [
        // 水平線
        [{ x: 0, y: baseheight *firstPercent }, { x: basewidth, y: baseheight *firstPercent }], // 123
        [{ x: 0, y: baseheight *secondPercent }, { x: basewidth, y: baseheight *secondPercent }], // 456
        [{ x: 0, y: baseheight *thirdPercent }, { x: basewidth, y: baseheight *thirdPercent }], // 789
        // 垂直線
        [{ x: basewidth *firstPercent, y: 0 }, { x: basewidth * firstPercent, y: baseheight }], // 147
        [{ x: basewidth *secondPercent, y: 0 }, { x: basewidth*secondPercent, y: baseheight }], // 258
        [{ x: basewidth *thirdPercent, y: 0 }, { x: basewidth * thirdPercent, y: baseheight }], // 369
        // 對角線
        [{ x: 0, y: 0 }, { x: basewidth, y: baseheight }], // 159
        [{ x: 0, y: baseheight }, { x: basewidth, y: 0 }]  // 357
    ];

    // 繪製每條線
    lines.forEach(line => {
        ctx.beginPath();
        ctx.globalAlpha = 0.5;
        ctx.moveTo(line[0].x, line[0].y);
        ctx.lineTo(line[1].x, line[1].y);
        ctx.strokeStyle = 'purple';
        ctx.stroke();
    });

    // 定義圓的百分比座標
    const circlePercentX = 3/6; // 50% 水平位置
    const circlePercentY = 1/6; // 17% 垂直位置
    const circleRadius = (1/18)*basewidth; // 圓半徑
    const difference = (1/24)*basewidth;
    console.log("width",basewidth);
    console.log("height",baseheight);
    // 繪製圓形圈住數字 1
    ctx.beginPath();
    ctx.globalAlpha = 1;
    const centerX = canvas.width * circlePercentX; // 計算圓心 X 坐標
    const centerY = canvas.height * circlePercentY; // 計算圓心 Y 坐標
    // ctx.arc(centerX, centerY, 10, 0, 2 * Math.PI);
    // ctx.arc(centerX, centerY, circleRadius, 0, 2 * Math.PI);
    // ctx.arc(centerX, centerY, circleRadius+difference, 0, 2 * Math.PI);
    ctx.arc( 45, 45, 16, 0, 2 * Math.PI); // 圓心 (15, 15)，半徑 12
    ctx.lineWidth = 2;
    ctx.stroke();
    ctx.beginPath();
    ctx.globalAlpha = 1;
    ctx.arc( 45, 45, 24, 0, 2 * Math.PI); // 圓心 (15, 15)，半徑 12
    ctx.strokeStyle = 'blue'; // 設定圓圈顏色
    ctx.lineWidth = 2;
    ctx.stroke();
</script>

</body>
</html>
<!-- const canvas = document.getElementById('gridCanvas');
    const ctx = canvas.getContext('2d');

    // 定義圓的百分比座標
    const circlePercentX = 0.2; // 20% 水平位置
    const circlePercentY = 0.2; // 20% 垂直位置
    const circleRadius = 12; // 圓半徑

    function drawCircle() {
        const centerX = canvas.width * circlePercentX; // 計算圓心 X 坐標
        const centerY = canvas.height * circlePercentY; // 計算圓心 Y 坐標

        ctx.beginPath();
        ctx.arc(centerX, centerY, circleRadius, 0, 2 * Math.PI);
        ctx.strokeStyle = 'blue';
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.fillText("Circle", centerX + 15, centerY); // 在圓旁邊繪製文字
    }

    function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // 初始化繪製
    clearCanvas();
    drawCircle(); -->